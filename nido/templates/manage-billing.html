{% extends "base.html" %}
{% block title %}Manage Billing{% endblock %}
{% block body_id %}manage-billing{% endblock %}
{% block body %}
  <main>
    <h1>Manage Billing</h1>
    <h2>Create New Recurring Charge</h2>
      <form method="post" action="{{url_for('.new_recurring_charge')}}">
        <label>Charge to: <select name="charged_to" required>
          <option value=""></option>
          <optgroup label="Residences">
             {% for residence in residences %}
             <option value="residence:{{residence.id}}">{{residence.unit_no}} {{residence.street}}</option>
             {% endfor %}
          </optgroup>
          <optgroup label="Individuals">
             {% for user in users %}
             <option value="user:{{user.id}}">{{user.family_name}}, {{user.personal_name}}</option>
             {% endfor %}
          </optgroup>
        </select></label>
        <label>Name:<input name="name" required></label>
        <label>Amount:<input name="amount" type="number" step="0.01" min="0" required></label>
        <label>Days to pay:<input name="grace" type="number" min="1" required></label>
        <label>Start Date:<input name="starting" type="date" pattern="\d{4}-\d{2}-\d{2}" required></label>
        <fieldset>
          <legend>Frequency:</legend>
          <label><input name="frequency" value="DAILY" type="radio">Every <input name="DAILY_skip" type="number" value="1" min="1" required> days</label>
          <label><input name="frequency" value="MONTHLY" type="radio">Every <input name="MONTHLY_skip" type="number" value="1" min="1" required> months</label>
          <label><input name="frequency" value="YEARLY" type="radio">Every <input name="YEARLY_skip" type="number" value="1" min="1" required> years</label>
        </fieldset>
        <button>Create</button>
      </form>
    <h2>Create New Single Charge</h2>
      <form method="post" action="{{url_for('.new_single_charge')}}">
        <label>Charge to: <select name="charged_to" required>
          <option value=""></option>
          <optgroup label="Residences">
             {% for residence in residences %}
             <option value="residence:{{residence.id}}">{{residence.unit_no}} {{residence.street}}</option>
             {% endfor %}
          </optgroup>
          <optgroup label="Individuals">
             {% for user in users %}
             <option value="user:{{user.id}}">{{user.family_name}}, {{user.personal_name}}</option>
             {% endfor %}
          </optgroup>
        </select></label>
        <label>Name:<input name="name" required></label>
        <label>Amount:<input name="amount" type="number" step="0.01" min="0" required></label>
        <label>Due Date:<input name="due" type="date" pattern="\d{4}-\d{2}-\d{2}" required></label>
        <button>Create</button>
      </form>
    <h2>Record Manual Payment</h2>
    <h2>Configure Online Payments</h2>
  </main>
{% endblock %}
